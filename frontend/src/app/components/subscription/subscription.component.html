<div class="subscription-container">
  <!-- Header -->
  <div class="subscription-header">
    <h1 class="title">🌟 Streamyscovery Premium</h1>
    <p class="subtitle">Choisissez le plan qui vous convient pour découvrir encore plus de streamers incroyables</p>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Chargement des plans d'abonnement...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-container">
    <div class="error-message">
      <i class="error-icon">⚠️</i>
      <p>{{ error }}</p>
      <button class="retry-button" (click)="ngOnInit()">Réessayer</button>
    </div>
  </div>

  <!-- Plans Grid -->
  <div *ngIf="!loading && !error" class="plans-grid">
    <div 
      *ngFor="let plan of plans" 
      class="plan-card"
      [class.current-plan]="isCurrentPlan(plan.id)"
      [class.plan-free]="plan.id === 'free'"
      [class.plan-premium]="plan.id === 'premium'"
      [class.plan-vip]="plan.id === 'vip'"
      [class.plan-legendary]="plan.id === 'legendary'"
      [class.highlighted]="plan.highlighted"
    >
      <!-- Badge -->
      <div *ngIf="plan.badge" class="plan-badge">{{ plan.badge }}</div>
      <div *ngIf="isCurrentPlan(plan.id)" class="current-badge">Actuel</div>

      <!-- Plan Header -->
      <div class="plan-header">
        <h3 class="plan-name">{{ plan.name }}</h3>
        <div class="plan-price">
          <span *ngIf="plan.price === 0" class="price-free">Gratuit</span>
          <span *ngIf="plan.price > 0" class="price-amount">
            {{ plan.price }}€
            <small>/mois</small>
          </span>
        </div>
        <p class="plan-description">{{ plan.description }}</p>
      </div>

      <!-- Plan Features -->
      <div class="plan-features">
        <ul>
          <li *ngFor="let feature of plan.features" class="feature-item">
            <i class="feature-icon">✓</i>
            <span>{{ feature }}</span>
          </li>
        </ul>
      </div>

      <!-- Plan Action -->
      <div class="plan-action">
        <button 
          class="plan-button"
          [class.button-current]="isCurrentPlan(plan.id)"
          [class.button-free]="plan.id === 'free'"
          [class.button-premium]="plan.id === 'premium'"
          [class.button-vip]="plan.id === 'vip'"
          [class.button-legendary]="plan.id === 'legendary'"
          [disabled]="isButtonDisabled(plan.id)"
          (click)="selectPlan(plan.id)"
        >
          {{ getButtonLabel(plan.id) }}
        </button>
      </div>
    </div>
  </div>

  <!-- Section de Test (Development Only) -->
  <div class="test-section" *ngIf="isDevelopment" style="margin-top: 2rem; padding: 1rem; background: rgba(255,255,255,0.1); border-radius: 12px;">
    <h4 style="color: #ff6b6b; margin-bottom: 1rem;">🧪 Test des Tiers Premium (DEV ONLY)</h4>
    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
      <button (click)="testChangeTier('free')" style="padding: 0.5rem 1rem; background: #6c757d; color: white; border: none; border-radius: 6px; cursor: pointer;">
        Test Free (6 quêtes)
      </button>
      <button (click)="testChangeTier('premium')" style="padding: 0.5rem 1rem; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer;">
        Test Premium (8 quêtes)
      </button>
      <button (click)="testChangeTier('vip')" style="padding: 0.5rem 1rem; background: #6f42c1; color: white; border: none; border-radius: 6px; cursor: pointer;">
        Test VIP (9 quêtes)
      </button>
      <button (click)="testChangeTier('legendary')" style="padding: 0.5rem 1rem; background: #ffc107; color: black; border: none; border-radius: 6px; cursor: pointer;">
        Test Légendaire (10 quêtes)
      </button>
    </div>
    <p style="font-size: 0.8rem; color: #ccc; margin-top: 0.5rem;">
      Cliquez pour tester les différents tiers. La page se rechargera pour voir l'effet sur les quêtes.
    </p>
  </div>

  <!-- Footer -->
  <div class="subscription-footer">
    <p class="footer-text">
      🔒 Paiements sécurisés par Stripe • 
      💳 Cartes acceptées • 
      🔄 Annulation à tout moment
    </p>
    <p class="footer-note">
      Tous les plans incluent l'accès complet aux 200 niveaux de progression. 
      Les fonctionnalités premium sont des bonus pour améliorer votre expérience.
    </p>
  </div>
</div>
