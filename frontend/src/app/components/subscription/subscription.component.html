<div class="subscription-container">
  <!-- Header -->
  <div class="header-section">
    <h1 class="main-title">ğŸŒŸ Streamyscovery Premium</h1>
    <p class="subtitle">DÃ©bloquez tout le potentiel de votre expÃ©rience gaming</p>
    <div class="free-guarantee">
      <span class="guarantee-badge">âœ… 100% Ã‰quitable</span>
      <span class="guarantee-text">Tous les niveaux 1-200 restent gratuits pour tous</span>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>Chargement des plans d'abonnement...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-container">
    <div class="error-icon">âš ï¸</div>
    <h3>Erreur de chargement</h3>
    <p>{{ error }}</p>
    <button class="retry-button" (click)="retryLoadPlans()">
      ğŸ”„ RÃ©essayer
    </button>
  </div>

  <!-- Plans Grid -->
  <div *ngIf="plans && !isLoading && !error" class="plans-grid">
    
    <!-- Plan FREE (informatif) -->
    <div class="plan-card plan-free">
      <div class="plan-header">
        <h3 class="plan-name">ğŸ†“ FREE</h3>
        <div class="plan-price">
          <span class="price-amount">0â‚¬</span>
          <span class="price-period">/mois</span>
        </div>
      </div>
      
      <div class="plan-features">
        <h4>Inclus gratuitement :</h4>
        <ul>
          <li>âœ… Tous les niveaux 1-200</li>
          <li>âœ… 6 quÃªtes quotidiennes</li>
          <li>âœ… 4 quÃªtes hebdomadaires</li>
          <li>âœ… 3 quÃªtes mensuelles</li>
          <li>âœ… XP normal</li>
          <li>âœ… Interface standard</li>
        </ul>
      </div>
      
      <div class="plan-action">
        <button class="plan-button current-plan" disabled>
          Plan actuel
        </button>
      </div>
    </div>

    <!-- Plan PREMIUM -->
    <div class="plan-card" [ngClass]="getPlanClass('premium')">
      <div class="plan-header">
        <h3 class="plan-name">ğŸ’ {{ plans.premium.name }}</h3>
        <div class="plan-price">
          <span class="price-amount">{{ plans.premium.price }}â‚¬</span>
          <span class="price-period">/mois</span>
        </div>
        <div class="plan-savings">50â‚¬/an (2 mois offerts)</div>
      </div>
      
      <div class="plan-features">
        <h4>En plus du FREE :</h4>
        <ul>
          <li *ngFor="let feature of getPlanFeatures(plans.premium)">
            {{ feature }}
          </li>
          <li>ğŸ¨ ThÃ¨mes "Dark Premium", "Blue Elegance"</li>
          <li>ğŸ… Badge Premium exclusif</li>
          <li>ğŸ¯ QuÃªtes premium exclusives</li>
        </ul>
      </div>
      
      <div class="plan-action">
        <button 
          class="plan-button plan-button-premium"
          [disabled]="isPlanProcessing('premium')"
          (click)="selectPlan('premium')">
          <span *ngIf="!isPlanProcessing('premium')">{{ getButtonText('premium') }}</span>
          <span *ngIf="isPlanProcessing('premium')" class="processing">
            <span class="spinner-small"></span>
            {{ getButtonText('premium') }}
          </span>
        </button>
      </div>
    </div>

    <!-- Plan VIP -->
    <div class="plan-card" [ngClass]="getPlanClass('vip')">
      <div class="plan-header">
        <div class="popular-badge">â­ POPULAIRE</div>
        <h3 class="plan-name">ğŸ‘‘ {{ plans.vip.name }}</h3>
        <div class="plan-price">
          <span class="price-amount">{{ plans.vip.price }}â‚¬</span>
          <span class="price-period">/mois</span>
        </div>
        <div class="plan-savings">90â‚¬/an (2 mois offerts)</div>
      </div>
      
      <div class="plan-features">
        <h4>En plus du Premium :</h4>
        <ul>
          <li *ngFor="let feature of getPlanFeatures(plans.vip)">
            {{ feature }}
          </li>
          <li>ğŸ“Š Analytics personnelles</li>
          <li>ğŸ¨ ThÃ¨mes "Golden VIP", "Neon Glow"</li>
          <li>ğŸ… Badge VIP exclusif</li>
          <li>ğŸ¯ +1 quÃªte hebdomadaire</li>
        </ul>
      </div>
      
      <div class="plan-action">
        <button 
          class="plan-button plan-button-vip"
          [disabled]="isPlanProcessing('vip')"
          (click)="selectPlan('vip')">
          <span *ngIf="!isPlanProcessing('vip')">{{ getButtonText('vip') }}</span>
          <span *ngIf="isPlanProcessing('vip')" class="processing">
            <span class="spinner-small"></span>
            {{ getButtonText('vip') }}
          </span>
        </button>
      </div>
    </div>

    <!-- Plan LEGENDARY -->
    <div class="plan-card" [ngClass]="getPlanClass('legendary')">
      <div class="plan-header">
        <h3 class="plan-name">ğŸŒŸ {{ plans.legendary.name }}</h3>
        <div class="plan-price">
          <span class="price-amount">{{ plans.legendary.price }}â‚¬</span>
          <span class="price-period">/mois</span>
        </div>
        <div class="plan-savings">150â‚¬/an (2 mois offerts)</div>
      </div>
      
      <div class="plan-features">
        <h4>En plus du VIP :</h4>
        <ul>
          <li *ngFor="let feature of getPlanFeatures(plans.legendary)">
            {{ feature }}
          </li>
          <li>ğŸ“Š Analytics avancÃ©es + comparaisons</li>
          <li>ğŸ›Ÿ Support prioritaire (24h)</li>
          <li>ğŸ¨ ThÃ¨mes "Divine Aura", "Cosmic Master"</li>
          <li>ğŸ… Titres "Seigneur LÃ©gendaire"</li>
          <li>ğŸ¯ +2 quÃªtes hebdo + 1 mensuelle</li>
        </ul>
      </div>
      
      <div class="plan-action">
        <button 
          class="plan-button plan-button-legendary"
          [disabled]="isPlanProcessing('legendary')"
          (click)="selectPlan('legendary')">
          <span *ngIf="!isPlanProcessing('legendary')">{{ getButtonText('legendary') }}</span>
          <span *ngIf="isPlanProcessing('legendary')" class="processing">
            <span class="spinner-small"></span>
            {{ getButtonText('legendary') }}
          </span>
        </button>
      </div>
    </div>
  </div>

  <!-- Authentication Notice -->
  <div *ngIf="!isAuthenticated" class="auth-notice">
    <div class="auth-icon">ğŸ”</div>
    <p>Connectez-vous avec Twitch pour accÃ©der aux abonnements premium</p>
  </div>

  <!-- Trust Indicators -->
  <div class="trust-section">
    <h3>ğŸ›¡ï¸ SÃ©curitÃ© et Transparence</h3>
    <div class="trust-grid">
      <div class="trust-item">
        <span class="trust-icon">ğŸ”’</span>
        <h4>Paiements sÃ©curisÃ©s</h4>
        <p>Stripe & PayPal</p>
      </div>
      <div class="trust-item">
        <span class="trust-icon">â†©ï¸</span>
        <h4>Annulation facile</h4>
        <p>Ã€ tout moment</p>
      </div>
      <div class="trust-item">
        <span class="trust-icon">âš–ï¸</span>
        <h4>SystÃ¨me Ã©quitable</h4>
        <p>Pas de pay-to-win</p>
      </div>
      <div class="trust-item">
        <span class="trust-icon">ğŸ®</span>
        <h4>Contenu de qualitÃ©</h4>
        <p>Plus de fun, pas d'avantage</p>
      </div>
    </div>
  </div>
</div>
