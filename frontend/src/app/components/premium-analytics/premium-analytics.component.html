<div class="analytics-container">
  <!-- Access pour VIP et Legendary uniquement -->
  <div *ngIf="hasAccess; else accessDenied">
    
    <!-- Header avec titre et badge -->
    <div class="analytics-header">
      <h1 class="title">ğŸš€ Analytique Premium</h1>
      <div class="tier-badge" 
           [class.badge-vip]="userTier === 'vip'"
           [class.badge-legendary]="userTier === 'legendary'">
        {{ userTier === 'legendary' ? 'â­ LEGENDARY' : 'ğŸ‘‘ VIP' }}
      </div>
    </div>

    <!-- Statistiques rapides -->
    <div class="quick-stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-content">
          <h3>{{ analyticsData.totalStreamsWatched }}</h3>
          <p>Streams regardÃ©s</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">â±ï¸</div>
        <div class="stat-content">
          <h3>{{ analyticsData.totalWatchTime }}h</h3>
          <p>Temps de visionnage</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ¯</div>
        <div class="stat-content">
          <h3>{{ analyticsData.completedQuests }}</h3>
          <p>QuÃªtes complÃ©tÃ©es</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">â­</div>
        <div class="stat-content">
          <h3>{{ analyticsData.totalXP | number }}</h3>
          <p>XP Total</p>
        </div>
      </div>
      
      <div class="stat-card" *ngIf="userTier === 'legendary'">
        <div class="stat-icon">ğŸ†</div>
        <div class="stat-content">
          <h3>{{ analyticsData.achievementsUnlocked }}</h3>
          <p>Achievements</p>
        </div>
      </div>
    </div>

    <!-- Analytiques dÃ©taillÃ©es -->
    <div class="detailed-analytics">
      
      <!-- Graphique de progression -->
      <div class="chart-section">
        <h2>ğŸ“ˆ Progression des 7 derniers jours</h2>
        <div class="progress-chart">
          <div class="progress-bar" 
               *ngFor="let day of analyticsData.weeklyProgress; let i = index"
               [style.height.px]="day.value * 2">
            <div class="bar-value">{{ day.value }}</div>
            <div class="bar-label">{{ day.day }}</div>
          </div>
        </div>
      </div>

      <!-- CatÃ©gories prÃ©fÃ©rÃ©es -->
      <div class="categories-section">
        <h2>ğŸ® CatÃ©gories favorites</h2>
        <div class="categories-list">
          <div class="category-item" 
               *ngFor="let category of analyticsData.topCategories; let i = index">
            <div class="category-rank">{{ i + 1 }}</div>
            <div class="category-name">{{ category.name }}</div>
            <div class="category-count">{{ category.count }}h</div>
          </div>
        </div>
      </div>
    </div>

    <!-- RÃ©sumÃ© mensuel -->
    <div class="monthly-summary">
      <h2>ğŸ“… RÃ©sumÃ© du mois</h2>
      <div class="summary-grid">
        <div class="summary-item">
          <strong>{{ analyticsData.monthlyStats.streamsDiscovered }}</strong>
          <span>Nouveaux streams dÃ©couverts</span>
        </div>
        <div class="summary-item">
          <strong>{{ analyticsData.monthlyStats.averageSessionTime }}h</strong>
          <span>DurÃ©e moyenne de session</span>
        </div>
        <div class="summary-item">
          <strong>{{ analyticsData.monthlyStats.questsCompleted }}</strong>
          <span>QuÃªtes terminÃ©es</span>
        </div>
        <div class="summary-item">
          <strong>{{ analyticsData.monthlyStats.xpGained | number }}</strong>
          <span>XP gagnÃ© ce mois</span>
        </div>
      </div>
    </div>

    <!-- FonctionnalitÃ©s Premium -->
    <div class="premium-showcase">
      <h2>âœ¨ Avantages {{ userTier === 'legendary' ? 'Legendary' : 'VIP' }}</h2>
      <div class="features-grid">
        <div class="feature-item">
          <div class="feature-check">âœ…</div>
          <div class="feature-text">Analytiques dÃ©taillÃ©es</div>
        </div>
        <div class="feature-item">
          <div class="feature-check">âœ…</div>
          <div class="feature-text">Boost XP x{{ userTier === 'legendary' ? '3' : '2' }}</div>
        </div>
        <div class="feature-item">
          <div class="feature-check">âœ…</div>
          <div class="feature-text">QuÃªtes bonus quotidiennes</div>
        </div>
        <div class="feature-item" *ngIf="userTier === 'legendary'">
          <div class="feature-check">âœ…</div>
          <div class="feature-text">AccÃ¨s anticipÃ© aux nouvelles fonctionnalitÃ©s</div>
        </div>
        <div class="feature-item" *ngIf="userTier === 'legendary'">
          <div class="feature-check">âœ…</div>
          <div class="feature-text">Support prioritaire</div>
        </div>
        <div class="feature-item" *ngIf="userTier === 'legendary'">
          <div class="feature-check">âœ…</div>
          <div class="feature-text">Badge Legendary exclusif</div>
        </div>
      </div>
    </div>

  </div>

  <!-- Template d'accÃ¨s refusÃ© -->
  <ng-template #accessDenied>
    <div class="access-denied">
      <div class="denied-content">
        <div class="denied-icon">ğŸ”’</div>
        <h2>AccÃ¨s Premium Requis</h2>
        <p>
          Les analytiques avancÃ©es sont rÃ©servÃ©es aux membres VIP et Legendary.
          <br>
          DÃ©bloquez des insights dÃ©taillÃ©s sur votre progression et vos habitudes de visionnage !
        </p>
        <button class="upgrade-button" (click)="navigateToUpgrade()">
          ğŸš€ Passer Premium
        </button>
      </div>
    </div>
  </ng-template>
</div>
