<!-- Navigation Header -->
<header class="navbar">
  <div class="navbar-container">
    <!-- Logo & Brand -->
    <div class="navbar-brand">
      <h1 class="brand-logo">
        <span class="brand-name">Streamyscovery</span>
        <span class="brand-tagline">Discover â€¢ Connect â€¢ Explore</span>
      </h1>
    </div>

    <!-- Navigation Links -->
    <nav class="navbar-nav">
      <a routerLink="/discovery" routerLinkActive="nav-active" class="nav-link">
        <i class="icon-discover"></i>
        DÃ©couvrir
      </a>
      <a routerLink="/favorites" routerLinkActive="nav-active" class="nav-link" *ngIf="isAuthenticated">
        <i class="icon-heart"></i>
        Favoris
        <span class="badge" *ngIf="favoriteCount > 0">{{ favoriteCount }}</span>
      </a>
      <button class="nav-link nav-button" *ngIf="isAuthenticated" (click)="openQuestsModal()">
        <i class="icon-quest">ðŸŽ¯</i>
        QuÃªtes
      </button>
    </nav>

    <!-- User Actions -->
    <div class="navbar-actions">
      <ng-container *ngIf="!isAuthenticated">
        <button class="btn btn-outline" (click)="login()">
          <i class="icon-twitch"></i>
          Se connecter
        </button>
      </ng-container>
      
      <ng-container *ngIf="isAuthenticated && user">
        <div class="user-menu">
          <div class="user-avatar">
            <img [src]="user.avatar_url || getDefaultUserAvatar(user.username)" [alt]="user.username" (error)="onUserAvatarError($event, user.username)">
          </div>
          <span class="user-name">{{ user.username }}</span>
          <button class="btn btn-ghost" (click)="logout()">
            <i class="icon-logout"></i>
          </button>
        </div>
      </ng-container>
    </div>
  </div>
</header>

<!-- Main Content -->
<main class="main-content">
  <router-outlet></router-outlet>
</main>

<!-- Footer -->
<footer class="footer">
  <div class="footer-container">
    <div class="footer-brand">
      <span class="text-muted">Streamyscovery Â© 2025</span>
    </div>
    <div class="footer-links">
      <a href="javascript:void(0)" class="footer-link" (click)="openAbout()">Ã€ propos</a>
      <a href="javascript:void(0)" class="footer-link" (click)="openPrivacy()">ConfidentialitÃ©</a>
      <a href="javascript:void(0)" class="footer-link" (click)="openContact()">Contact</a>
    </div>
  </div>
</footer>

<!-- Modal des QuÃªtes -->
<div class="modal-overlay" *ngIf="isQuestsModalOpen" (click)="closeQuestsModal()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">
        <span class="title-icon">ðŸŽ¯</span>
        QuÃªtes & Progression
      </h2>
      <button class="modal-close" (click)="closeQuestsModal()">
        <span class="close-icon">âœ•</span>
      </button>
    </div>
    <div class="modal-body">
      <app-quests></app-quests>
    </div>
  </div>
</div>
